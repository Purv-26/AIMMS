<!DOCTYPE html>
<html lang="en" >
<head>
  <link rel="stylesheet" hres="Main.html">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>AIMMS - AI Medical Multi-Solution Software</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&amp;display=swap" rel="stylesheet" />
  <style>
    :root {
      --color-bg: #0a0a0a;
      --color-primary: #fff;
      --color-secondary: #b0b3b8;
      --color-accent: #fff;
      --color-accent-hover: #e0e0e0;
      --color-card-bg: rgba(255,255,255,0.08);
      --color-shadow: 0 8px 32px 0 rgba(255,255,255,0.07);
      --color-error: #ef4444;
      --glass-blur: blur(16px);
      --font-family: 'Poppins', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
      --radius: 1.25rem;
      --spacing-vertical: 5rem;
      --container-max-width: 1200px;
      --glow: 0 0 16px #fff, 0 0 32px #fff2;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      width: 100vw;
      max-width: 100vw;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
    }
    *, *::before, *::after {
      box-sizing: border-box;
    }
    h1, h2, h3, h4, p, a, span, li, label, button, input, textarea, select {
      word-break: break-word;
      overflow-wrap: break-word;
    }
    .container, main, header, footer, section, #ai-chatbox, #scanner, .modal-content {
      width: 100%;
      max-width: 100vw;
      box-sizing: border-box;
    }
    .features, .ai-doctor-grid {
      width: 100%;
      max-width: 100vw;
      box-sizing: border-box;
    }
    img, svg {
      max-width: 100%;
      height: auto;
      display: block;
    }
    #chat-window {
      width: 100%;
      max-width: 100vw;
      min-width: 0;
      box-sizing: border-box;
    }
    #chat-input-container {
      width: 100%;
      max-width: 100vw;
      box-sizing: border-box;
    }
    .modal-content {
      width: 100%;
      max-width: 95vw;
      box-sizing: border-box;
    }
    button, input[type="file"], input[type="text"], input[type="password"], select, textarea {
      min-height: 44px;
    }
    body {
      margin: 0;
      font-family: var(--font-family);
      background: linear-gradient(135deg, #0a0a0a 0%, #181a1b 100%);
      color: var(--color-primary);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      scroll-behavior: smooth;
      min-height: 100vh;
    }

    h1,h2,h3,h4 {
      margin: 0 0 0.5rem 0;
      font-weight: 700;
      color: var(--color-primary);
      text-shadow: 0 2px 16px #000a;
    }

    h1 {
      font-size: 3.5rem;
      font-weight: 800;
      letter-spacing: -0.03em;
      line-height: 1.1;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
      animation: fadeInDown 1.2s cubic-bezier(.77,0,.18,1) both;
    }

    h2 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 3rem;
      text-align: center;
      color: var(--color-accent);
      text-shadow: 0 2px 16px #fff2;
      animation: fadeInUp 1.2s cubic-bezier(.77,0,.18,1) both;
    }

    h3 {
      font-size: 1.375rem;
    }

    p {
      color: var(--color-secondary);
      font-size: 1.125rem;
      margin: 0 0 1.25rem 0;
      max-width: 650px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.65;
    }

    a {
      color: var(--color-accent);
      text-decoration: none;
      border-bottom: 1px solid transparent;
      transition: border-color 0.25s, color 0.25s;
      font-weight: 600;
    }
    a:hover,
    a:focus {
      border-color: var(--color-accent);
      color: #fff;
      outline: none;
    }

    .container {
      max-width: var(--container-max-width);
      margin-left: auto;
      margin-right: auto;
      padding-left: 2rem;
      padding-right: 2rem;
    }

    header {
      position: sticky;
      top: 0;
      background: rgba(10,10,10,0.95);
      z-index: 50;
      box-shadow: var(--color-shadow);
      border-bottom: 1px solid #222;
      backdrop-filter: var(--glass-blur);
      animation: fadeInDown 1.2s cubic-bezier(.77,0,.18,1) both;
      min-height: 60px;
      padding-top: env(safe-area-inset-top, 0px);
    }

    #btn-send,
    #btn-voice,
    #btn-reset {
      background: linear-gradient(90deg, #fff 0%, #e0e0e0 100%);
      border: none;
      border-radius: var(--radius);
      color: #181a1b;
      font-weight: 700;
      font-size: 1.2rem;
      cursor: pointer;
      padding: 0 1.5rem;
      box-shadow: var(--glow);
      transition: background 0.3s, color 0.3s, border 0.3s, transform 0.25s, box-shadow 0.3s;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 48px;
    }

    #btn-send:hover,
    #btn-send:focus,
    #btn-voice:hover,
    #btn-voice:focus,
    #btn-reset:hover,
    #btn-reset:focus {
      background: #181a1b;
      color: #fff;
      border: 2px solid #fff;
      outline: none;
      transform: scale(1.08);
      box-shadow: 0 0 32px #fff6;
    }

    nav {
      max-width: var(--container-max-width);
      margin: 0 auto;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 2rem;
    }

    .logo {
      font-weight: 800;
      font-size: 1.75rem;
      cursor: default;
      user-select: none;
      letter-spacing: 0.05em;
      color: var(--color-accent);
      text-shadow: 0 0 16px #fff2;
      filter: drop-shadow(0 0 8px #fff2);
    }

    .nav-links {
      display: flex;
      gap: 2rem;
      font-weight: 600;
      font-size: 1rem;
      align-items: center;
    }

    .nav-links a,
    .nav-links button {
      background: none;
      border: none;
      color: var(--color-primary);
      cursor: pointer;
      padding: 0.25rem 0.5rem;
      font-weight: 600;
      border-bottom: 2px solid transparent;
      transition: border-color 0.3s, color 0.3s;
      font-family: var(--font-family);
      user-select: none;
    }

    .nav-links a:hover,
    .nav-links a:focus,
    .nav-links button:hover,
    .nav-links button:focus {
      border-color: var(--color-accent);
      outline: none;
      color: var(--color-accent);
      text-shadow: 0 0 8px #fff2;
    }

    main {
      padding-top: var(--spacing-vertical);
      padding-bottom: var(--spacing-vertical);
      text-align: center;
      animation: fadeIn 1.5s cubic-bezier(.77,0,.18,1) both;
    }

    .hero p {
      font-weight: 400;
      margin-top: 1rem;
      margin-bottom: 0;
      color: #e0e0e0;
      text-shadow: 0 2px 8px #000a;
      animation: fadeInUp 1.5s 0.2s both;
    }

    .btn-primary {
      margin-top: 3rem;
      font-weight: 700;
      font-size: 1.5rem;
      padding: 1.25rem 3rem;
      border-radius: var(--radius);
      background: linear-gradient(90deg, #fff 0%, #e0e0e0 100%);
      color: #181a1b;
      border: none;
      cursor: pointer;
      transition: background 0.3s, color 0.3s, border 0.3s, transform 0.25s, box-shadow 0.3s;
      user-select: none;
      box-shadow: var(--glow);
      letter-spacing: 0.02em;
      animation: fadeInUp 1.5s 0.3s both;
    }

    .btn-primary:hover,
    .btn-primary:focus {
      background: #181a1b;
      color: #fff;
      border: 2px solid #fff;
      outline: none;
      transform: scale(1.06);
      box-shadow: 0 0 32px #fff6;
    }

    section {
      padding: 5rem 0;
      animation: fadeInUp 1.2s cubic-bezier(.77,0,.18,1) both;
    }

    section#features {
      padding-top: 0;
    }

    .section-title {
      text-align: center;
      margin-bottom: 3rem;
      font-weight: 700;
      font-size: 2.25rem;
      color: var(--color-accent);
      text-shadow: 0 2px 16px #fff2;
    }

    .features {
      display: grid;
      gap: 3rem;
      grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
      max-width: var(--container-max-width);
      margin-left: auto;
      margin-right: auto;
    }

    .card {
      background: var(--color-card-bg);
      border-radius: var(--radius);
      box-shadow: var(--color-shadow);
      padding: 2.25rem 2rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      transition: box-shadow 0.3s, transform 0.3s, background 0.3s;
      cursor: default;
      outline-offset: 4px;
      backdrop-filter: var(--glass-blur);
      border: 1.5px solid #222;
      animation: fadeInCard 1.2s cubic-bezier(.77,0,.18,1) both;
    }

    .card:hover,
    .card:focus-within {
      box-shadow: 0 14px 40px #fff2;
      transform: translateY(-8px) scale(1.03);
      outline: none;
      background: rgba(255,255,255,0.13);
    }

    .card-icon {
      width: 48px;
      height: 48px;
      color: var(--color-accent);
      user-select: none;
      fill: none;
      stroke: var(--color-accent);
      stroke-width: 2;
      filter: drop-shadow(0 0 8px #fff2);
    }

    .card h3 {
      font-weight: 700;
      color: var(--color-accent);
      margin-top: 0;
      margin-bottom: 0.5rem;
      font-size: 1.375rem;
      line-height: 1.2;
      text-shadow: 0 2px 8px #fff2;
    }

    .card p {
      flex-grow: 1;
      color: var(--color-secondary);
      font-size: 1rem;
      line-height: 1.5;
    }

    #scanner {
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      background: var(--color-card-bg);
      padding: 2rem;
      border-radius: var(--radius);
      box-shadow: var(--color-shadow);
      text-align: center;
      backdrop-filter: var(--glass-blur);
      border: 1.5px solid #222;
      animation: fadeInCard 1.2s cubic-bezier(.77,0,.18,1) both;
    }

    #scanner p {
      font-size: 1.125rem;
      color: var(--color-secondary);
      margin-bottom: 1.5rem;
    }

    #scanner input[type="file"] {
      cursor: pointer;
      border-radius: var(--radius);
      padding: 0.9rem 1.25rem;
      font-size: 1.125rem;
      border: 1px solid #333;
      background: rgba(20,20,20,0.7);
      color: var(--color-primary);
      transition: border-color 0.3s, background 0.3s;
      width: 100%;
      max-width: 100%;
      box-sizing: border-box;
    }

    #scanner input[type="file"]:focus {
      outline: none;
      border-color: var(--color-accent);
      box-shadow: 0 0 0 4px #fff2;
      background: rgba(30,30,30,0.9);
    }

    .diagnosis-result {
      margin-top: 1.5rem;
      color: var(--color-accent);
      font-weight: 700;
      min-height: 3rem;
      user-select: text;
      font-size: 1.125rem;
      text-shadow: 0 2px 8px #fff2;
    }

    #dashboards {
      max-width: var(--container-max-width);
      margin-left: auto;
      margin-right: auto;
    }

    .dashboard-tabs {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 2rem;
    }

    .tab-button {
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      font-size: 1.3rem;
      font-weight: 600;
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      transition: border-color 0.3s, color 0.3s;
      font-family: var(--font-family);
      color: var(--color-secondary);
      user-select: none;
    }

    .tab-button.active {
      border-color: var(--color-accent);
      color: var(--color-primary);
    }

    .tab-content {
      background: var(--color-card-bg);
      border-radius: var(--radius);
      padding: 2rem;
      box-shadow: var(--color-shadow);
      min-height: 280px;
      font-weight: 600;
      color: var(--color-primary);
      outline-offset: 4px;
      backdrop-filter: var(--glass-blur);
      border: 1.5px solid #222;
    }

    .dashboard-list {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    .dashboard-list li {
      border-bottom: 1px solid #222;
      padding: 0.75rem 0;
      display: flex;
      justify-content: space-between;
      color: var(--color-secondary);
      font-weight: 600;
    }

    .patient-info p {
      font-size: 1rem;
      color: var(--color-primary);
      margin: 0.5rem 0;
    }

    #about-creator {
      margin-top: 100px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      padding: 2rem;
      background: var(--color-card-bg);
      border-radius: var(--radius);
      box-shadow: var(--color-shadow);
      text-align: center;
      color: var(--color-primary);
      backdrop-filter: var(--glass-blur);
      border: 1.5px solid #222;
      animation: fadeInCard 1.2s cubic-bezier(.77,0,.18,1) both;
    }

    footer {
      text-align: center;
      padding: 3rem 2rem;
      font-size: 0.875rem;
      color: var(--color-secondary);
      user-select: none;
      border-top: 1px solid #222;
      background: rgba(10,10,10,0.95);
      backdrop-filter: var(--glass-blur);
    }

    @media (max-width: 1280px) {
      .container {
        max-width: 1100px;
      }
    }
    @media (max-width: 1024px) {
      .container {
        max-width: 900px;
      }
      .features, .ai-doctor-grid {
        gap: 2rem;
      }
    }
    @media (max-width: 768px) {
      .container {
        max-width: 98vw;
        padding-left: 1rem;
        padding-right: 1rem;
      }
      .features, .ai-doctor-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }
      main, section, #ai-chatbox, #scanner {
        padding-left: 0.5rem;
        padding-right: 0.5rem;
      }
      h1 {
        font-size: 1.7rem;
      }
      h2 {
        font-size: 1.1rem;
      }
    }
    @media (max-width: 640px) {
      h1 {
        font-size: 1.3rem;
      }
      h2 {
        font-size: 1rem;
      }
      .btn-primary {
        width: 100%;
        font-size: 1rem;
        padding: 0.8rem 0;
        margin-top: 1.2rem;
      }
      nav {
        flex-direction: row;
        height: auto;
        padding: 0.5rem 0.2rem;
        align-items: center;
        position: relative;
        z-index: 2000;
      }
      #hamburger {
        display: flex;
        z-index: 2200;
      }
      .nav-links {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: rgba(10,10,10,0.98);
        flex-direction: column;
        align-items: center;
        gap: 1.2rem;
        width: 100vw;
        margin: 0;
        padding: 1.2rem 0 1.2rem 0;
        box-shadow: 0 8px 24px #000a;
        border-bottom-left-radius: 1rem;
        border-bottom-right-radius: 1rem;
        z-index: 2100;
        transition: max-height 0.3s, opacity 0.3s;
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        pointer-events: none;
      }
      .nav-links.open {
        max-height: 400px;
        opacity: 1;
        pointer-events: auto;
      }
      .nav-links a, .nav-links button {
        font-size: 1.2rem;
        padding: 0.8rem 0;
        width: 100%;
        text-align: center;
        border-radius: 0.5rem;
      }
      .logo {
        margin-bottom: 0;
        font-size: 1.3rem;
      }
      #ai-chatbox {
        padding: 0.5rem 0.2rem;
      }
      #chat-window {
        height: 120px;
        font-size: 0.95rem;
        padding: 0.2rem;
      }
      #chat-input-container {
        flex-direction: column;
        gap: 0.2rem;
      }
      #chat-input {
        font-size: 0.95rem;
        min-height: 36px;
        padding: 0.3rem 0.5rem;
      }
      #btn-send, #btn-voice, #btn-reset {
        min-width: 44px;
        min-height: 44px;
        font-size: 1rem;
        padding: 0.2rem 0;
        margin: 0;
      }
      #scanner {
        padding: 0.5rem 0.2rem;
      }
      #scanner input[type="file"] {
        font-size: 0.95rem;
        padding: 0.8rem 0.3rem;
        width: 100%;
      }
      .diagnosis-result {
        font-size: 0.95rem;
      }
      .modal-content {
        padding: 1rem 0.2rem;
        max-width: 99vw;
      }
      form input[type="text"],
      form input[type="password"],
      form select {
        font-size: 0.95rem;
        padding: 0.4rem 0.4rem;
      }
      form button[type="submit"] {
        font-size: 1rem;
        padding: 0.8rem 0;
      }
    }
    @media (max-width: 480px) {
      h1 {
        font-size: 1.1rem;
      }
      h2 {
        font-size: 0.95rem;
      }
      .btn-primary {
        font-size: 0.95rem;
        padding: 0.7rem 0;
      }
      #chat-window {
        height: 120px;
        font-size: 0.9rem;
      }
      #chat-input {
        font-size: 0.9rem;
        min-height: 30px;
      }
      #btn-send, #btn-voice, #btn-reset {
        font-size: 0.95rem;
        height: 36px;
      }
    }

    a:focus,
    button:focus,
    input:focus,
    select:focus,
    textarea:focus {
      outline: 3px solid var(--color-accent);
      outline-offset: 2px;
    }

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      display: none;
      justify-content: center;
      align-items: center;
      padding: 1rem;
      z-index: 10000;
      animation: fadeIn 0.7s cubic-bezier(.77,0,.18,1) both;
    }
    .modal.active {
      display: flex;
    }
    .modal-content {
      background: var(--color-card-bg);
      border-radius: var(--radius);
      box-shadow: var(--color-shadow);
      max-width: 400px;
      width: 100%;
      padding: 2.5rem 2rem;
      position: relative;
      user-select: none;
      backdrop-filter: var(--glass-blur);
      border: 1.5px solid #222;
      animation: fadeInUp 1.2s cubic-bezier(.77,0,.18,1) both;
    }
    .modal-close {
      position: absolute;
      top: 0.5rem;
      right: 0.8rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--color-secondary);
      font-weight: 700;
      user-select: none;
      transition: color 0.3s;
    }
    .modal-close:hover,
    .modal-close:focus {
      color: var(--color-accent);
      outline: none;
    }
    form label {
      display: block;
      margin-bottom: 0.25rem;
      font-weight: 600;
      user-select: text;
      color: var(--color-primary);
    }
    form input[type="text"],
    form input[type="password"],
    form select {
      width: 100%;
      padding: 0.5rem 0.75rem;
      font-family: var(--font-family);
      font-size: 1rem;
      border: 1.5px solid #333;
      border-radius: var(--radius);
      margin-bottom: 1rem;
      background: rgba(20,20,20,0.7);
      color: var(--color-primary);
      transition: border-color 0.3s, background 0.3s;
      user-select: text;
    }
    form input[type="text"]:focus,
    form input[type="password"]:focus,
    form select:focus {
      outline: none;
      border-color: var(--color-accent);
      box-shadow: 0 0 0 3px #fff2;
      background: rgba(30,30,30,0.9);
    }
    .form-error {
      color: var(--color-error);
      font-size: 0.85rem;
      margin-top: -0.75rem;
      margin-bottom: 0.75rem;
      display: none;
      user-select: text;
    }
    form button[type="submit"] {
      background: linear-gradient(90deg, #fff 0%, #e0e0e0 100%);
      border: none;
      border-radius: var(--radius);
      padding: 0.75rem;
      font-weight: 700;
      font-size: 1.125rem;
      color: #181a1b;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s, color 0.3s, border 0.3s, transform 0.25s, box-shadow 0.3s;
      width: 100%;
      box-shadow: var(--glow);
    }
    form button[type="submit"]:hover,
    form button[type="submit"]:focus {
      background: #181a1b;
      color: #fff;
      border: 2px solid #fff;
      outline: none;
      transform: scale(1.05);
      box-shadow: 0 0 32px #fff6;
    }
    .form-toggle {
      margin-top: 1rem;
      font-size: 0.9rem;
      text-align: center;
      user-select: text;
      color: var(--color-secondary);
    }
    .form-toggle button {
      background: none;
      border: none;
      color: var(--color-accent);
      font-weight: 600;
      cursor: pointer;
      user-select: none;
      padding: 0;
    }
    .form-toggle button:hover,
    .form-toggle button:focus {
      text-decoration: underline;
      outline: none;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: var(--container-max-width);
      margin: 2rem auto 1rem auto;
      padding: 0 2rem;
    }
    .dashboard-header h2 {
      margin: 0;
      font-size: 2rem;
      user-select: text;
    }
    .btn-logout {
      background: var(--color-error);
      border: none;
      border-radius: var(--radius);
      color: white;
      font-weight: 700;
      padding: 0.5rem 1.5rem;
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
      user-select: none;
    }
    .btn-logout:hover,
    .btn-logout:focus {
      background: #b91c1c;
      outline: none;
      transform: scale(1.05);
    }

    #ai-doctors {
      max-width: var(--container-max-width);
      margin-left: auto;
      margin-right: auto;
      padding-top: var(--spacing-vertical);
      padding-bottom: 3rem;
    }

    #ai-doctors h2 {
      text-align: center;
      font-weight: 800;
      font-size: 2.75rem;
      margin-bottom: 3rem;
      color: var(--color-accent);
      text-shadow: 0 2px 16px #fff2;
    }

    .ai-doctor-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(320px,1fr));
      gap: 3rem;
    }

    .ai-doctor-card {
      background: var(--color-card-bg);
      border-radius: var(--radius);
      box-shadow: var(--color-shadow);
      padding: 2.25rem 2rem;
      outline-offset: 4px;
      cursor: default;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      transition: box-shadow 0.3s, transform 0.3s, background 0.3s;
      backdrop-filter: var(--glass-blur);
      border: 1.5px solid #222;
      animation: fadeInCard 1.2s cubic-bezier(.77,0,.18,1) both;
    }
    .ai-doctor-card:hover,
    .ai-doctor-card:focus-within {
      box-shadow: 0 12px 40px #fff2;
      transform: translateY(-8px) scale(1.03);
      outline: none;
      background: rgba(255,255,255,0.13);
    }

    .ai-doctor-icon {
      width: 48px;
      height: 48px;
      color: var(--color-accent);
      margin-bottom: 1rem;
      user-select: none;
      fill: none;
      stroke: var(--color-accent);
      stroke-width: 2;
      filter: drop-shadow(0 0 8px #fff2);
    }

    .ai-doctor-icon svg {
      width: 48px;
      height: 48px;
      stroke: var(--color-accent);
      stroke-width: 2;
      fill: none;
    }

    .ai-doctor-card h3 {
      font-weight: 800;
      font-size: 1.75rem;
      margin-bottom: 1rem;
      color: var(--color-accent);
      text-shadow: 0 2px 8px #fff2;
    }

    .ai-doctor-card p {
      font-size: 1rem;
      color: var(--color-secondary);
      line-height: 1.5;
      margin-bottom: 0;
      flex-grow: 1;
    }
    
    #ai-chatbox {
      max-width: var(--container-max-width);
      background: var(--color-card-bg);
      margin: 4rem auto 3rem auto;
      border-radius: var(--radius);
      padding: 2rem;
      box-shadow: var(--color-shadow);
      display: flex;
      flex-direction: column;
      backdrop-filter: var(--glass-blur);
      border: 1.5px solid #222;
      animation: fadeInCard 1.2s cubic-bezier(.77,0,.18,1) both;
    }
    #ai-chatbox h2 {
      font-weight: 800;
      font-size: 2.75rem;
      color: var(--color-accent);
      margin-bottom: 1.5rem;
      text-align: center;
      text-shadow: 0 2px 16px #fff2;
    }
    #doctor-select {
      max-width: 400px;
      margin: 0 auto 1.75rem auto;
      font-size: 1.125rem;
      font-weight: 600;
      background: rgba(20,20,20,0.7);
      border: 2px solid var(--color-accent);
      border-radius: var(--radius);
      padding: 0.5rem 1rem;
      cursor: pointer;
      user-select: none;
      transition: border-color 0.3s, background 0.3s;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      position: relative;
      color: var(--color-primary);
    }
    #doctor-select:focus {
      outline: none;
      border-color: var(--color-accent-hover);
      box-shadow: 0 0 6px #fff2;
      background: rgba(30,30,30,0.9);
    }
    #doctor-select option {
      font-weight: 400;
      background: #181a1b;
      color: var(--color-primary);
    }
    #chat-window {
      background: rgba(20,20,20,0.7);
      border: 1.5px solid #222;
      border-radius: var(--radius);
      height: 360px;
        max-width: 700px;
        margin: 0 auto 1.75rem auto;
      padding: 1rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      user-select: none;
      scroll-behavior: smooth;
      box-shadow: 0 2px 12px #fff1;
      animation: fadeInCard 1.2s cubic-bezier(.77,0,.18,1) both;
    }
    .chat-message {
      max-width: 80%;
      padding: 0.75rem 1.25rem;
      border-radius: var(--radius);
      font-size: 1.125rem;
      line-height: 1.4;
      word-wrap: break-word;
      white-space: pre-wrap;
      user-select: text;
      box-shadow: 0 2px 5px #fff1;
      opacity: 0.85;
      transition: opacity 0.3s, background 0.3s;
      background: rgba(30,30,30,0.7);
      color: var(--color-primary);
      border: 1px solid #222;
      animation: fadeInUp 0.7s cubic-bezier(.77,0,.18,1) both;
    }
    .chat-message:hover {
      opacity: 1;
      background: rgba(40,40,40,0.9);
    }
    .chat-message.user {
      align-self: flex-end;
      background: linear-gradient(90deg, #fff 0%, #e0e0e0 100%);
      color: #181a1b;
      border-top-right-radius: 0;
      box-shadow: 0 4px 10px #fff2;
    }
    .chat-message.doctor {
      align-self: flex-start;
      background: rgba(30,30,30,0.7);
      color: var(--color-accent);
      border-top-left-radius: 0;
      font-weight: 600;
      text-shadow: 0 2px 8px #fff2;
    }
    #chat-input-container {
      max-width: 700px;
      margin: 0 auto;
      display: flex;
      gap: 1rem;
    }
    #chat-input {
      flex-grow: 1;
      font-size: 1.125rem;
      border: 1.5px solid #333;
      border-radius: var(--radius);
      padding: 0.75rem 1rem;
      font-family: var(--font-family);
      resize: none;
      min-height: 48px;
      max-height: 96px;
      background: rgba(20,20,20,0.7);
      color: var(--color-primary);
      transition: border-color 0.3s, background 0.3s;
    }
    #chat-input:focus {
      outline: none;
      border-color: var(--color-accent);
      box-shadow: 0 0 6px #fff2;
      background: rgba(30,30,30,0.9);
    }
    #btn-send, #btn-voice, #btn-reset {
      background: linear-gradient(90deg, #fff 0%, #e0e0e0 100%);
      border: none;
      border-radius: var(--radius);
      color: #181a1b;
      font-weight: 700;
      font-size: 1.2rem;
      cursor: pointer;
      padding: 0 1.5rem;
      box-shadow: var(--glow);
      transition: background 0.3s, color 0.3s, border 0.3s, transform 0.25s, box-shadow 0.3s;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #btn-send:hover,
    #btn-send:focus,
    #btn-voice:hover,
    #btn-reset:hover {
      background: #181a1b;
      color: #fff;
      border: 2px solid #fff;
      outline: none;
      transform: scale(1.05);
      box-shadow: 0 0 32px #fff6;
    }
    #chat-window::-webkit-scrollbar {
      width: 10px;
    }
    #chat-window::-webkit-scrollbar-thumb {
      background: #222;
      border-radius: 5px;
    }
    #chat-window::-webkit-scrollbar-track {
      background: #181a1b;
      border-radius: 5px;
    }

    /* Animations */
    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(40px); }
      100% { opacity: 1; transform: none; }
    }
    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(40px); }
      100% { opacity: 1; transform: none; }
    }
    @keyframes fadeInDown {
      0% { opacity: 0; transform: translateY(-40px); }
      100% { opacity: 1; transform: none; }
    }
    @keyframes fadeInCard {
      0% { opacity: 0; transform: scale(0.95) translateY(40px); }
      100% { opacity: 1; transform: none; }
    }
    #hamburger {
      display: none;
      background: none;
      border: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 44px;
      height: 44px;
      cursor: pointer;
      z-index: 1001;
      margin-left: 1rem;
    }
    .hamburger-bar {
      width: 28px;
      height: 3px;
      background: #fff;
      margin: 4px 0;
      border-radius: 2px;
      transition: all 0.3s;
      display: block;
    }
    @media (max-width: 640px) {
      nav {
        flex-direction: row;
        height: auto;
        padding: 0.5rem 0.2rem;
        align-items: center;
      }
      #hamburger {
        display: flex;
      }
      .nav-links {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: rgba(10,10,10,0.98);
        flex-direction: column;
        align-items: center;
        gap: 1.2rem;
        width: 100vw;
        margin: 0;
        padding: 1.2rem 0 1.2rem 0;
        box-shadow: 0 8px 24px #000a;
        border-bottom-left-radius: 1rem;
        border-bottom-right-radius: 1rem;
        z-index: 1000;
        transition: max-height 0.3s, opacity 0.3s;
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        pointer-events: none;
      }
      .nav-links.open {
        max-height: 400px;
        opacity: 1;
        pointer-events: auto;
      }
      .nav-links a, .nav-links button {
        font-size: 1.2rem;
        padding: 0.8rem 0;
        width: 100%;
        text-align: center;
        border-radius: 0.5rem;
      }
      .logo {
        margin-bottom: 0;
        font-size: 1.3rem;
      }
    }
  </style>
</head>
<body>
  <header role="banner" id="headerMain">
    <nav aria-label="Primary navigation">
      <div class="logo" tabindex="0" aria-label="AIMMS Logo">AIMMS</div>
      <button id="hamburger" aria-label="Open navigation menu" aria-controls="navLinksPublic" aria-expanded="false" type="button">
        <span class="hamburger-bar"></span>
        <span class="hamburger-bar"></span>
        <span class="hamburger-bar"></span>
      </button>
      <div class="nav-links" id="navLinksPublic">
        <a href="#features" tabindex="0">Features</a>
        <a href="#ai-doctors" tabindex="0">AI Doctors</a>
        <a href="#about-creator" tabindex="0">About Creator</a>
        <button id="btnLogin" aria-haspopup="dialog" aria-controls="loginModal" aria-expanded="false" type="button">Login / Signup</button>
      </div>
      <div class="nav-links" id="navLinksLoggedIn" style="display:none;">
        <span id="navUserRole" aria-live="polite"></span>
        <button id="btnLogout" type="button">Logout</button>
      </div>
    </nav>
  </header>

  <main>
    <div id="public-content" tabindex="-1">
      <section class="hero" id="hero" aria-label="Hero introduction">
        <h1>Welcome to AIMMS: The Ultimate AI-Powered Medical Multi-Solution Software</h1>
        <p>Your comprehensive AI doctor system, advanced medical report scanner, secure patient &amp; doctor dashboards, and robust database — all in one powerful platform.</p>
        <button class="btn-primary" onclick="document.getElementById('ai-chatbox').scrollIntoView({behavior:'smooth'})" aria-label="Get Started - Scroll to Upload Section" type="button">Get Started</button>
      </section>

      <section id="ai-doctors" aria-labelledby="ai-doctors-title">
        <h2 id="ai-doctors-title">All Types of AI Doctors — Unmatched Medical Knowledge</h2>
        <div class="ai-doctor-grid" role="list">
          <article class="ai-doctor-card" role="listitem" tabindex="0" aria-label="General Physician AI Doctor">
            <svg class="ai-doctor-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <circle cx="12" cy="12" r="10" />
              <path d="M12 16v-4m0 0l3 2m-3-2l-3 2" />
            </svg>
            <h3>General Physician AI</h3>
            <p>Extensive MBBS expertise to provide comprehensive primary care, diagnose illnesses, and prescribe optimized treatments with ultimate accuracy.</p>
          </article>
          <article class="ai-doctor-card" role="listitem" tabindex="0" aria-label="Radiologist AI Doctor">
            <svg class="ai-doctor-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <rect x="4" y="4" width="16" height="16" rx="2" ry="2"/>
              <path d="M8 13h8M8 17h8" />
            </svg>
            <h3>Radiologist AI</h3>
            <p>Analyzes medical images like X-rays, MRIs, CT scans, detecting abnormalities and early disease markers faster than human counterparts.</p>
          </article>
          <article class="ai-doctor-card" role="listitem" tabindex="0" aria-label="Cardiologist AI Doctor">
            <svg class="ai-doctor-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <path d="M12 21s-6-4.35-6-9a6 6 0 0 1 12 0c0 4.65-6 9-6 9z"/>
            </svg>
            <h3>Cardiologist AI</h3>
            <p>Offers in-depth cardiovascular diagnostics and personalized treatment plans leveraging massive datasets and real-time analysis.</p>
          </article>
          <article class="ai-doctor-card" role="listitem" tabindex="0" aria-label="Oncologist AI Doctor">
            <svg class="ai-doctor-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <circle cx="12" cy="12" r="10"/>
              <path d="M8 12h8" />
            </svg>
            <h3>Oncologist AI</h3>
            <p>Detects cancerous cells early and recommends evidence-based treatments from global oncology research and clinical trials.</p>
          </article>
          <article class="ai-doctor-card" role="listitem" tabindex="0" aria-label="Neurologist AI Doctor">
            <svg class="ai-doctor-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <path d="M12 2a10 10 0 0 0-4 19.13m1-3.74c-1-1.2-2-3 1-4m2-2l2 3" />
            </svg>
            <h3>Neurologist AI</h3>
            <p>Specializes in nervous system disorders, synthesizing neuroimaging, genetic, and clinical data into cutting-edge therapeutic suggestions.</p>
          </article>
          <article class="ai-doctor-card" role="listitem" tabindex="0" aria-label="Pediatrician AI Doctor">
            <svg class="ai-doctor-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <circle cx="12" cy="12" r="10" />
              <path d="M7 9h10M7 14h6" />
            </svg>
            <h3>Pediatrician AI</h3>
            <p>Expert care for infants, children, and adolescents, tailored diagnostics and preventive medicine empowered by pediatric research.</p>
          </article>
          <article class="ai-doctor-card" role="listitem" tabindex="0" aria-label="Dermatologist AI Doctor">
            <svg class="ai-doctor-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <rect x="7" y="7" width="10" height="10" rx="4" ry="4" />
              <path d="M12 7v10" />
            </svg>
            <h3>Dermatologist AI</h3>
            <p>Precise skin condition analyses, including early melanoma detection and effective treatment recommendations with vast dermatological data.</p>
          </article>
          <article class="ai-doctor-card" role="listitem" tabindex="0" aria-label="Psychiatrist AI Doctor">
            <svg class="ai-doctor-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <circle cx="12" cy="12" r="10"/>
              <path d="M9 9h6M9 15h6" />
            </svg>
            <h3>Psychiatrist AI</h3>
            <p>Combines behavioral science and AI-driven therapy models offering personalized mental health assessments and ongoing support.</p>
          </article>
        </div>
      </section>

      <section id="ai-chatbox" aria-label="Chat With AI Doctors">
        <h2>Chat With Our Expert AI Doctors</h2>
        <select id="doctor-select" aria-label="Select AI Doctor type for chat">
          <option value="General Physician">General Physician</option>
          <option value="Radiologist">Radiologist</option>
          <option value="Cardiologist">Cardiologist</option>
          <option value="Oncologist">Oncologist</option>
          <option value="Neurologist">Neurologist</option>
          <option value="Pediatrician">Pediatrician</option>
          <option value="Dermatologist">Dermatologist</option>
          <option value="Psychiatrist">Psychiatrist</option>
        </select>
        <div id="chat-window" role="log" aria-live="polite" aria-relevant="additions" tabindex="0"></div>
        <div id="chat-input-container">
          <textarea id="chat-input" placeholder="Type your message here..." rows="2" aria-label="Type your message"></textarea>
          <button id="btn-send" aria-label="Send message" type="button">Send</button>
          <button id="btn-voice" aria-label="Speak your message" type="button">🎤 Speak</button>
          <button id="btn-reset" aria-label="Reset chat" type="button">Reset Chat</button>
        </div>
      </section>

      <section id="features" aria-labelledby="features-title">
        <h2 class="section-title" id="features-title">Core Features of AIMMS</h2>
        <div class="features" role="list">
          <article class="card" role="listitem" tabindex="0" aria-label="Medical Report Scanner">
            <svg class="card-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <rect x="3" y="4" width="18" height="16" rx="2" ry="2" />
              <path d="M7 12h10M7 16h6" />
            </svg>
            <h3>Medical Report Scanner</h3>
            <p>Upload MRI, CT scans, and other reports for AI analysis to detect problems and suggest treatments.</p>
          </article>
          <article class="card" role="listitem" tabindex="0" aria-label="Secure Database">
            <svg class="card-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <rect x="4" y="4" width="16" height="16" rx="3" ry="3" />
              <circle cx="12" cy="12" r="3" />
            </svg>
            <h3>Robust &amp; Secure Database</h3>
            <p>Strongly encrypted, scalable storage ensuring privacy and integrity of sensitive medical data.</p>
          </article>
          <article class="card" role="listitem" tabindex="0" aria-label="Mobile App">
            <svg class="card-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <rect x="7" y="2" width="10" height="20" rx="2" ry="2" />
              <circle cx="12" cy="19" r="1" />
            </svg>
            <h3>Mobile App</h3>
            <p>Native mobile experience for seamless communication and health tracking on the go.</p>
          </article>
          <article class="card" role="listitem" tabindex="0" aria-label="Comprehensive Medical Solutions">
            <svg class="card-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <path d="M7 7h10v10H7z" />
              <path d="M5 5h14v14H5z" />
            </svg>
            <h3>Comprehensive Medical Solutions</h3>
            <p>From diagnosis to treatment recommendations across all medical fields integrated smartly by AI.</p>
          </article>
          <article class="card" role="listitem" tabindex="0" aria-label="Strong Security">
            <svg class="card-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false" >
              <rect x="6" y="11" width="12" height="7" rx="2" ry="2" />
              <path d="M9 11V7h6v4" />
            </svg>
            <h3>Strong Security</h3>
            <p>Multi-layered protocols, end-to-end encryption, and compliance with medical standards such as HIPAA.</p>
          </article>
        </div>
      </section>

      <section id="scanner" aria-labelledby="scanner-title">
        <h2 class="section-title" id="scanner-title">Medical Report Scanner</h2>
        <div class="scanner" role="region" aria-live="polite" aria-atomic="true" tabindex="0">
          <p>Select your MRI, CT scan, or other medical report to upload. Our AI will analyze and provide a diagnostic suggestion.</p>
          <input type="file" id="fileInput" aria-label="Upload medical report file" accept=".jpg,.jpeg,.png,.pdf" />
          <div id="diagnosisResult" class="diagnosis-result" aria-live="polite" aria-atomic="true" role="status"></div>
        </div>
      </section>

    </div>

    <section id="about-creator" aria-labelledby="about-creator-title">
      <h2 class="section-title" id="about-creator-title">About the AIMMS</h2>
      <div id="aboutCreator" class="about-creator">
        <h3>Purv Kevadiya</h3>
        <p>
        AIMMS is an advanced AI-powered medical multi-solution platform developed by <strong>Purv Kevadiya</strong>, a group of data analysis and software engineering experts. The software is designed to revolutionize healthcare by integrating state-of-the-art artificial intelligence with robust medical knowledge, providing comprehensive diagnostic tools, secure data management, and seamless communication between doctors and patients.
        </p>
        <p>
        Team Codex is committed to delivering innovative, secure, and reliable solutions that empower healthcare professionals and patients alike, ensuring privacy, accuracy, and efficiency at every step.
        </p>
      </div>
      </section>
    </div>
    
  </main>

  <footer role="contentinfo">
    <div class="container">
      <p>&copy; 2024 AIMMS. All rights reserved.</p>
    </div>
  </footer>

<div id="loginModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="loginModalTitle" aria-describedby="loginModalDesc" tabindex="-1">
  <div class="modal-content">
    <button class="modal-close" id="modalCloseBtn" aria-label="Close login modal" type="button">&times;</button>
    <h2 id="loginModalTitle">Login / Signup</h2>

    <form id="authForm" method="POST" enctype="multipart/form-data">
      <label for="inputUsername">Username</label>
      <input type="text" id="inputUsername" name="username" required />

      <label for="inputPassword">Password</label>
      <input type="password" id="inputPassword" name="password" required />

      <label for="selectRole">I am a</label>
      <select id="selectRole" name="role" required>
        <option value="">Select role</option>
        <option value="doctor">Doctor</option>
        <option value="patient">Patient</option>
      </select>

      <div id="doctorProofContainer" style="display: none;">
        <label for="doctorProof">Upload Doctor Proof</label>
        <input type="file" id="doctorProof" name="proof" accept=".jpg,.jpeg,.png,.pdf" />
      </div>

      <button type="submit" id="submitAuthBtn">Login</button>
    </form>

    <div class="form-toggle" id="formToggleText">
      Don't have an account? <button id="toggleModeBtn" type="button">Sign Up</button>
    </div>
  </div>
</div>

<script>
  const loginModal = document.getElementById('loginModal');
  const btnLogin = document.getElementById('btnLogin');
  const modalCloseBtn = document.getElementById('modalCloseBtn');
  const authForm = document.getElementById('authForm');
  let toggleModeBtn = document.getElementById('toggleModeBtn');
  const formToggleText = document.getElementById('formToggleText');
  const submitAuthBtn = document.getElementById('submitAuthBtn');
  const doctorProofContainer = document.getElementById('doctorProofContainer');
  const selectRole = document.getElementById('selectRole');

  let isLoginMode = true;

  // Open modal (call this from your login button)
  function showModal() {
    loginModal.classList.add('active');
  }

  // Close modal
  function hideModal() {
    loginModal.classList.remove('active');
    authForm.reset();
    doctorProofContainer.style.display = 'none';
    // Restore the Admin option when closing the modal
    if (!isAdminOptionPresent()) {
      addAdminOption();
    }
  }

  // Toggle between Login and Signup modes
  function toggleMode() {
    isLoginMode = !isLoginMode;
    submitAuthBtn.textContent = isLoginMode ? 'Login' : 'Sign Up';
    toggleModeBtn.textContent = isLoginMode ? 'Sign Up' : 'Login';

    // Update the form toggle text
    formToggleText.innerHTML = isLoginMode
      ? "Don't have an account? <button id='toggleModeBtn' type='button'>Sign Up</button>"
      : "Already have an account? <button id='toggleModeBtn' type='button'>Login</button>";

    authForm.action = isLoginMode ? 'login.php' : 'signup.php';

    // Re-attach the event listener to the toggleModeBtn after updating its HTML
    toggleModeBtn = document.getElementById('toggleModeBtn'); // Re-query the element
    toggleModeBtn.addEventListener('click', toggleMode);

    // Hide/show proof field if not doctor
    doctorProofContainer.style.display = 'none';
    authForm.reset();

    // Remove or add the Admin option based on the mode
    if (!isLoginMode) {
      removeAdminOption();
    } else if (!isAdminOptionPresent()) {
      addAdminOption();
    }
  }

  // Handle doctor proof visibility
  selectRole.addEventListener('change', () => {
    const role = selectRole.value;
    doctorProofContainer.style.display = (role === 'doctor' && !isLoginMode) ? 'block' : 'none';
  });

  // Listeners
  modalCloseBtn.addEventListener('click', hideModal);
  loginModal.addEventListener('click', (event) => {
    if (event.target === loginModal) {
      hideModal();
    }
  });

  // Event listener for the "Open Login/Signup Modal" button
  if (btnLogin) {
    btnLogin.addEventListener('click', showModal);
  }

  // Initial setup for toggleModeBtn (important: do this after the element exists in the DOM)
  if (toggleModeBtn) {
    toggleModeBtn.addEventListener('click', toggleMode);
  }

  authForm.addEventListener('submit', async (event) => {
    event.preventDefault();

    const username = document.getElementById('inputUsername').value;
    const password = document.getElementById('inputPassword').value;
    const role = document.getElementById('selectRole').value;
    const proofFile = document.getElementById('doctorProof').files[0];

    if (!username || !password || !role) {
      alert("Please fill all fields.");
      return;
    }

    if (isLoginMode) {
      // LOGIN MODE
      const response = await fetch('http://localhost:3000/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          username,
          password,
          role: role.toLowerCase() // 'patient', 'doctor', 'admin'
        })
      });

      const data = await response.json();
      if (response.ok) {
        // Redirect by role
        if (role === 'doctor') {
          window.location.href = 'Doctor.html';
        } else if (role === 'patient') {
          window.location.href = 'Patient.html';
        } else if (role === 'admin') {
          window.location.href = 'Admin.html';
        }
      } else {
        alert(data.message);
      }
    } else {
      // SIGNUP MODE
      if (role === 'doctor') {
        // Doctor signup with proof
        if (!proofFile) {
          alert("Please upload doctor proof.");
          return;
        }
        const formData = new FormData();
        formData.append('username', username);
        formData.append('password', password);
        formData.append('proof', proofFile);
        const response = await fetch('http://localhost:3000/signup/doctor', {
          method: 'POST',
          body: formData
        });
        const data = await response.json();
        if (response.ok) {
          alert(data.message);
          window.location.href = 'Doctor.html';
        } else {
          alert(data.message || "Signup failed.");
        }
      } else if (role === 'patient') {
        // Patient signup
        const response = await fetch('http://localhost:3000/signup/patient', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ username, password })
        });
        const data = await response.json();
        if (response.ok) {
          alert(data.message);
          window.location.href = 'Patient.html';
        } else {
          alert(data.message || "Signup failed.");
        }
      }
    }
  });

  // Helper functions to manage the Admin option
  function removeAdminOption() {
    const adminOption = document.querySelector('#selectRole option[value="admin"]');
    if (adminOption) {
      adminOption.remove();
    }
  }

    function addAdminOption() {
    const selectRole = document.getElementById('selectRole');
    if (selectRole) {
      const adminOption = document.createElement('option');
      adminOption.value = 'admin';
      adminOption.textContent = 'Admin';
      selectRole.appendChild(adminOption);
    }
  }

  function isAdminOptionPresent() {
    return document.querySelector('#selectRole option[value="admin"]') !== null;
  }

    // Existing JS unchanged except new chat box logic below added

    // Chat box new implementation
    const doctorSelect = document.getElementById('doctor-select');
    const chatWindow = document.getElementById('chat-window');
    const chatInput = document.getElementById('chat-input');
    const btnSend = document.getElementById('btn-send');
    const btnReset = document.getElementById('btn-reset');
    const btnVoice = document.getElementById('btn-voice');

    let chatHistory = [];
    let messageCount = 0;
    let userName = null;
    let awaitingName = false;

    function appendMessage(sender, message) {
      const msgDiv = document.createElement('div');
      msgDiv.className = `chat-message ${sender}`;
      if (sender === 'doctor') {
        msgDiv.innerHTML = message;
      } else {
        msgDiv.textContent = message;
      }
      chatWindow.appendChild(msgDiv);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    function showTypingIndicator() {
      const typingDiv = document.createElement('div');
      typingDiv.className = 'chat-message doctor';
      typingDiv.textContent = 'Doctor is typing...';
      typingDiv.id = 'typing-indicator';
      chatWindow.appendChild(typingDiv);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }
    function removeTypingIndicator() {
      const typingDiv = document.getElementById('typing-indicator');
      if (typingDiv) typingDiv.remove();
    }

    async function sendToAIChat(messages) {
      try {
        const response = await fetch('http://localhost:3000/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ messages })
        });
        if (!response.ok) throw new Error('AI service error');
        const data = await response.json();
        return data.reply;
      } catch (err) {
        return null;
      }
    }

    btnSend.addEventListener('click', async () => {
      const userMsg = chatInput.value.trim();
      if (!userMsg) return;
      appendMessage('user', userMsg);
      chatHistory.push({ role: 'user', content: userMsg });
      chatInput.value = '';
      btnSend.disabled = true;
      showTypingIndicator();
      // Send to backend AI
      let aiMsg = await sendToAIChat(chatHistory);
      removeTypingIndicator();
      if (!aiMsg) {
        aiMsg = "Sorry, I'm having trouble connecting to the AI service. Please try again later.";
      } else {
        chatHistory.push({ role: 'assistant', content: aiMsg });
      }
      appendMessage('doctor', aiMsg);
      btnSend.disabled = false;
    });

    // Also allow sending message with Enter key (without shift)
    chatInput.addEventListener('keydown', e => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        btnSend.click();
      }
    });
        btnReset.addEventListener('click', () => {
      chatWindow.innerHTML = '';
      chatHistory = [];
      messageCount = 0;
      userName = null;
      awaitingName = false;
      appendMessage('doctor', aiDoctorResponses[doctorSelect.value][0]);
    });

    // On doctor type change, reset chat history and greet user
    doctorSelect.addEventListener('change', () => {
      chatWindow.innerHTML = '';
      chatHistory = [];
      messageCount = 0;
      userName = null;
      awaitingName = false;
      appendMessage('doctor', aiDoctorResponses[doctorSelect.value][0]);
    });

    // Initialize with default doctor welcome message
    (function init() {
      appendMessage('doctor', aiDoctorResponses[doctorSelect.value][0]);
    })();
    // 🎤 Real-time Voice Recognition
if ('webkitSpeechRecognition' in window) {
  const recognition = new webkitSpeechRecognition();
  recognition.continuous = true;
  recognition.interimResults = false;
  recognition.lang = 'en-IN';

  btnVoice.addEventListener('click', () => {
    recognition.start();
    btnVoice.textContent = '🎙 Listening...';
  });

  recognition.onresult = event => {
    const transcript = event.results[event.resultIndex][0].transcript.toLowerCase().trim();
    btnVoice.textContent = '🎤 Speak';

    chatInput.value = transcript;  // ✅ Show spoken text in input box
    btnSend.click();               // ✅ Trigger send automatically
  };

  recognition.onerror = () => {
    btnVoice.textContent = '🎤 Speak';
    alert('Voice recognition error. Try again.');
  };

  recognition.onend = () => {
    recognition.start(); // auto restart for real-time listening
  };
} else {
  btnVoice.disabled = true;
  btnVoice.title = 'Voice recognition not supported';
}

    // Simulated AI analysis on file upload
    const fileInput = document.getElementById('fileInput');
    const diagnosisResult = document.getElementById('diagnosisResult');

    fileInput.addEventListener('change', () => {
      const file = fileInput.files[0];
      if (!file) {
        diagnosisResult.textContent = "No file selected.";
        return;
      }

      // Check the file type
      const validFileTypes = ['image/jpeg', 'image/png', 'application/pdf'];
      if (!validFileTypes.includes(file.type)) {
        diagnosisResult.textContent = "Invalid file type. Please upload a JPEG, PNG, or PDF medical report.";
        return;
      }

      // Check for medical-related keywords in the file name
      const medicalKeywords = ['report', 'diagnosis', 'scan', 'MRI', 'CT', 'X-ray', 'ultrasound', 'blood', 'test'];
      const fileName = file.name.toLowerCase();
      const isMedicalReport = medicalKeywords.some(keyword => fileName.includes(keyword));

      if (!isMedicalReport) {
        diagnosisResult.textContent = "The uploaded file does not appear to be a medical report. Please upload a valid medical report.";
        return;
      }

      diagnosisResult.textContent = "Analyzing report, please wait...";

      // Simulate AI analysis with a timeout
      setTimeout(() => {
        const treatmentSuggestions = [
          "No significant abnormalities detected. Continue regular check-ups.",
          "Early signs of sinus infection detected; recommend antibiotics.",
          "Possible mild tumor detected; suggest further specialist consultation.",
          "Signs of inflammation found; suggest anti-inflammatory treatment.",
          "MRI shows moderate joint degeneration; recommend physiotherapy.",
          "CT scan reveals normal lung function; no treatment needed.",
          "Indications of mild anemia; recommend blood tests and supplements.",
          "For best results, consult with a healthcare professional for personalized advice."
        ];

        // Randomly select a treatment suggestion
        const randomIndex = Math.floor(Math.random() * treatmentSuggestions.length);
        diagnosisResult.textContent = "AI Suggestion: " + treatmentSuggestions[randomIndex];
      }, 3000); // Simulate a delay for analysis
    });

  // Hamburger menu toggle for mobile
  const hamburger = document.getElementById('hamburger');
  const navLinksPublic = document.getElementById('navLinksPublic');
  const body = document.body;

  function openMenu() {
    navLinksPublic.classList.add('open');
    hamburger.setAttribute('aria-expanded', 'true');
    // Prevent background scroll
    body.style.overflow = 'hidden';
  }
  function closeMenu() {
    navLinksPublic.classList.remove('open');
    hamburger.setAttribute('aria-expanded', 'false');
    body.style.overflow = '';
  }
  function toggleMenu(e) {
    e.stopPropagation();
    if (navLinksPublic.classList.contains('open')) {
      closeMenu();
    } else {
      openMenu();
    }
  }

  if (hamburger && navLinksPublic) {
    // Click and touch support
    hamburger.addEventListener('click', toggleMenu);
    hamburger.addEventListener('touchstart', toggleMenu);

    // Close menu when a link is clicked (for better UX)
    navLinksPublic.querySelectorAll('a,button').forEach(el => {
      el.addEventListener('click', () => {
        closeMenu();
      });
    });

    // Close menu if clicking outside
    document.addEventListener('click', (e) => {
      if (
        navLinksPublic.classList.contains('open') &&
        !navLinksPublic.contains(e.target) &&
        e.target !== hamburger
      ) {
        closeMenu();
      }
    });

    // Close menu on resize (if switching to desktop)
    window.addEventListener('resize', () => {
      if (window.innerWidth > 640) {
        closeMenu();
      }
    });
  }

  </script>

</body>
</html>
</html>
